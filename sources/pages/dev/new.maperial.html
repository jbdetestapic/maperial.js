<html>

<head>
<title>Maperial 1.2</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<link href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css" />
<link href="http://static.maperial.localhost/css/maperial-js.min.css" rel="stylesheet" type="text/css" />
</head>

<body>
	<div id="map"></div>
</body>

<style type="text/css">
  #map {
    width: 100%;
   	height: 100%;
  }
</style>
  
<script type="text/javascript" src="/js/tools/script-loader.js"></script>
<script type="text/javascript">
   window.scriptLoader
         .getScripts(
               [ 
                //--------------------------------------------------------------------
                // external libs
                "http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js",
                "http://code.jquery.com/ui/1.10.3/jquery-ui.js" ,

                // external tools
                "/js/tools/utils.js",
                "/js/libs/jquery.mousewheel.min.js",
                "/js/libs/jquery.selectbox-0.2.min.js",
                "/js/libs/jquery.validate.min.js",

                //--------------------------------------------------------------------
                // MaperialJS
                
                // libs ------------------------------
                "/js/maperialjs2/libs/gl-matrix-min.js",
                "/js/maperialjs2/libs/proj4js-compressed.js",
                "/js/maperialjs2/libs/coordinate-system.js",

                // core ------------------------------
               	"/js/maperialjs2/core/maperial.js",
               	"/js/maperialjs2/core/maperial-api.js",
                "/js/maperialjs2/core/map-view.js",
                "/js/maperialjs2/core/map-context.js",

                // managers ------------------------------
               	"/js/maperialjs2/core/managers/source-manager.js",
               	"/js/maperialjs2/core/managers/layer-manager.js",
               	
                // models ----------------------------
                "/js/maperialjs2/core/models/source.js",
                "/js/maperialjs2/core/models/vectorial-style.js",
                "/js/maperialjs2/core/models/colorbar.js",

                "/js/maperialjs2/core/models/layers/image-layer.js",
                "/js/maperialjs2/core/models/layers/dynamical-layer.js",

                "/js/maperialjs2/core/models/data/image-data.js",
                "/js/maperialjs2/core/models/data/dynamical-data.js",
                "/js/maperialjs2/core/models/data/heatmap-data.js",

                // rendering -------------------------
                "/js/maperialjs2/core/rendering/gl-tools.js",
                "/js/maperialjs2/core/rendering/tile.js",
                "/js/maperialjs2/core/rendering/map-renderer.js",

                "/js/maperialjs2/core/rendering/layerparts/image-layer-part.js",
                "/js/maperialjs2/core/rendering/layerparts/raster-layer-part.js",
                "/js/maperialjs2/core/rendering/layerparts/shade-layer-part.js",
                "/js/maperialjs2/core/rendering/layerparts/vectorial-layer-part.js",
                "/js/maperialjs2/core/rendering/layerparts/dynamical-layer-part.js",

                // extensions ------------------------
                //"/js/maperialjs2/extensions/",

                //--------------------------------------------------------------------
                // google - geoloc
                //"https://maps.googleapis.com/maps/api/js?key=AIzaSyATwlkawyHykpfJF24jcPgL_b8kK8zO2Bc&sensor=false&libraries=places,panoramio",
                      
               	], function() {

                  //-----------------------------------------------//
				  // Build your Maperial
                  //-----------------------------------------------//
				  
                  var maperial = new Maperial () 
                  
			      //-----------------------------------------------//
			      
			      var map = maperial.addView({
			        container		: "map",
			     	defaultZoom    	: 9,
				    latitude       	: 50.516584,
				    longitude      	: 3.186998
			      })
			      
			      //-----------------------------------------------//
			      // Layer Images
			      
			      map.addImageLayer(Source.IMAGES_OCM_TRANSPORT)
			      
			      //-----------------------------------------------//
			      // Layer Vectorial Data 

                  var brasseries = new DynamicalData()
                  brasseries.addPoint(	50.367874, 3.080601999999999, 				{ brasserie : "Abbaye de St Landelin"} )
                  brasseries.addPoint(	44.85579000000001, -0.6157699999999977, 	{ brasserie : "Abbatiale St Amand"} )
                  brasseries.addPoint(	50.529722, 2.931556999999998, 				{ brasserie : "Bière Lepers 8"} )
                  brasseries.addPoint(	50.69285499999999,2.4138020000000324, 		{ brasserie : "Bracine"} )
                  
                  var options = {
                     style : new VectorialStyle({
   			      	   symbol : "symbols/blue.pointer.png"
      			     })
                  }
                  
			      map.addDynamicalLayer(brasseries, options)

			      //-----------------------------------------------//
			      // Layer OSM
			      // map.addOSMLayer()
			      
			      //-----------------------------------------------//
			      /* 
			      var control = {
                     type : HUD.LATLON,
			         position : { 
			            left:"50%", 
			            top: "0"
			         }
                  }
			      
			      maperial.addControl(map, control)
                  */
			      
                  //-----------------------------------------------//
 			      // oldies : 
			      //-----------------------------------------------//
 			      //	- data a recup
 			      //	- creation du style + symbolizer a recup
 			      
 			      
					/* 
					var cdata         = maperial.createCustomData ();
					
			        var cstyle        = maperial.createStyle ();
					var ps            = new PointSymbolizer("symbols/blue.pointer.png") 
			      	ps.Alignement("center", "bottom")
					//var ps            = new PointSymbolizer("symbols/airfield.svg") 
					var pSymbId       = cstyle.AddSymbolizer ( ps , 18 , 0  );
					*/
			       
	              //-----------------------------------------------//
               });
</script>


</html>

