<html>

<head>
    <title>Maperial 2.0 - Dynamical data</title>
    <link href="http://static.maperial.localhost/css/maperial.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="map" class="fullscreen-map"></div>
</body>

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="http://static.maperial.localhost/js/maperial.js"></script>

<script type="text/javascript">
    (function () {

        //------------------------------------------------------
        // Maperial
        //------------------------------------------------------

        var maperial = new Maperial();

        var map = maperial.createMap({
            container: "map",
            defaultZoom: 15,
            latitude: 53.03787562127988,
            longitude: 4.844833878624368
        });

        //----------------------------------------------

        // @FIXME
        // bug : once in a while data is not displayed : only with a image layer
        // tip : window.dr.reset() fixes it.
        var url = 'http://static.maperial.com/geojson/demo.geojson.json';
        var brasseries = window.data = maperial.createDynamicalData(url);

        // var collection = {
        //     "type": "FeatureCollection",
        //     "features": [{
        //         "geometry": {
        //             "type": "Point",
        //             "coordinates": [
        //                 4.844833878624368,
        //                 53.04105507065753
        //             ]
        //         },
        //         "type": "Feature",
        //         "properties": {}
        //     }, {
        //         "geometry": {
        //             "type": "Point",
        //             "coordinates": [
        //                 4.834833878624368,
        //                 53.03119775566745
        //             ]
        //         },
        //         "type": "Feature",
        //         "properties": {}
        //     }]
        // }
        // var brasseries = maperial.createDynamicalData(collection);

        // TODO : defaultsymbol + feature.properties.symbol to override by point
        var options = {
            style: {
                symbol: "symbols/blue.pointer.png"
            }
        };

        map.addOCMTransport();
        map.addDynamicalLayer(brasseries, options);

    })();
</script>


</html>