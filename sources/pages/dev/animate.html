<html>

<head>
    <title>Maperial 2.0 - Heatmap</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <link href="http://static.maperial.localhost/css/maperial.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="heatmap" class="fullscreen-map"></div>
</body>

<script type="text/javascript" src="//static.maperial.localhost/js/maperial.js"></script>
<script type="text/javascript">
    (function () {

        var maperial = new Maperial();

        //----------------------------------------------

        var map = maperial.createView({
            container: "heatmap",
            defaultZoom: 7,
            latitude: 50.916584,
            longitude: 3.136998
        });

        //----------------------------------------------
        //Layer Images

        map.addWatercolor();

        //----------------------------------------------
        //Layer Vectorial Data

        var data = map.createHeatmapData();

        //----------------------------------------------

        var batches = [
            [
                [50.916584, 3.136998, 30000, 0.6]
            ],
            [
                [50.816584, 3.336998, 20000, 0.6],
                [50.956584, 3.226998, 10000, 0.6]
            ]
        ];

        //----------------------------------------------

        var options = {
            diameter: 300,
            scale: 0.8,
            fill: "linear", // "gaussian"
            diameterUnit: "meter",
        };

        map.addHeatmapLayer(data, options);

        //------------------------------------------------------
        // animate

        var nextBatch = funtion() {
            setTimeout
            batches[needle]
            needle = (needle + 1) % batches.length

        }

        data.reset();
        batch.forEach(function (point) {
            data.addPoint(point[0], point[1], point[2], point[3]);
        });

        //------------------------------------------------------
        // dev purpose

        window.data = data;
        window.map = map;
    })();
</script>

</html>