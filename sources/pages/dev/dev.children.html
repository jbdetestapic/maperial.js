<html>

<head>
<title>Demo Maperial- Style Edition</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<link href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css" />
<link href="http://static.maperial.localhost/css/maperial-js.min.css" rel="stylesheet" type="text/css" />
</head>

<body>
	<div id="maperial"></div>
	<img id="waitingSpin" src="http://static.maperial.localhost/images/mapediting/spin.gif" />
</body>

<script type="text/javascript" src="/js/tools/script-loader.js"></script>

<script type="text/javascript">
   window.scriptLoader
         .getScripts(
               [
                     "//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js",
                     "http://code.jquery.com/ui/1.10.3/jquery-ui.js",

                     // tools
                     "/js/tools/utils.js",
                     "/js/libs/jquery.mousewheel.min.js",
                     "/js/libs/jquery.selectbox-0.2.min.js",
                     "/js/libs/jquery.validate.min.js",
                     "/js/libs/proj4js-compressed.js",

                     // libs
                     "/js/extensions/maperialjs/libs/gl-matrix-min.js",
                     "/js/extensions/maperialjs/libs/coordinate-system.js",
                     "/js/extensions/maperialjs/libs/geoloc.js",
                     "/js/extensions/maperialjs/libs/colorpicker.js",
                     "/js/extensions/maperialjs/libs/RGBColor.js",
                     "/js/extensions/maperialjs/libs/hashmap.js",
                     "/js/extensions/maperialjs/libs/canvasutilities.js",

                     // rendering
                     "/js/extensions/maperialjs/rendering/gl-tools.js",
                     "/js/extensions/maperialjs/rendering/gl-rasterlayer.js",
                     "/js/extensions/maperialjs/rendering/gl-imagelayer.js",
                     "/js/extensions/maperialjs/rendering/gl-shadelayer.js",
                     "/js/extensions/maperialjs/rendering/gl-tile.js",
                     "/js/extensions/maperialjs/rendering/gl-vectoriallayer.js",
                     "/js/extensions/maperialjs/rendering/render-line.js",
                     "/js/extensions/maperialjs/rendering/render-text.js",
                     "/js/extensions/maperialjs/rendering/tile-renderer.js",
                     "/js/extensions/maperialjs/rendering/map-renderer.js",

                     // modules
                     "/js/extensions/maperialjs/events.js",
                     "/js/extensions/maperialjs/source.js",
                     "/js/extensions/maperialjs/mouse.js",
                     "/js/extensions/maperialjs/mover.js",
                     "/js/extensions/maperialjs/template-builder.js",

                     // hud
                     "/js/extensions/maperialjs/hud/hud.js",
                     "/js/extensions/maperialjs/hud/panel-composition.js",
                     "/js/extensions/maperialjs/hud/panel-layer-settings.js",
                     "/js/extensions/maperialjs/hud/panel-switch.js",
                     "/js/extensions/maperialjs/hud/panel-controls.js",
                     "/js/extensions/maperialjs/hud/panel-latlon.js",
                     "/js/extensions/maperialjs/hud/panel-scale.js",
                     "/js/extensions/maperialjs/hud/panel-settings.js",
                     "/js/extensions/maperialjs/hud/panel-attribution.js",
                     "/js/extensions/maperialjs/hud/panel-lens.js",
                     "/js/extensions/maperialjs/hud/triggers.js",

                     // managers
                     "/js/extensions/maperialjs/managers/styles-manager.js",
                     "/js/extensions/maperialjs/managers/colorbars-manager.js",
                     "/js/extensions/maperialjs/managers/layers-manager.js",
                     "/js/extensions/maperialjs/managers/sources-manager.js",
                     "/js/extensions/maperialjs/managers/children-manager.js",

                     // edition
                     "/js/extensions/maperialjs/edition/boundingbox-drawer.js",
                     "/js/extensions/maperialjs/edition/colortool.js",
                     "/js/extensions/maperialjs/edition/symbolizer.js",
                     "/js/extensions/maperialjs/edition/style-menu.js",

                     // colorbar
                     "/js/extensions/maperialjs/colorbar/colorbar-rainbow.js",
                     "/js/extensions/maperialjs/colorbar/colorbar.js",

                     "/js/extensions/maperialjs/maperial.js",

                     // google - geoloc
                     "https://maps.googleapis.com/maps/api/js?key=AIzaSyATwlkawyHykpfJF24jcPgL_b8kK8zO2Bc&sensor=false&libraries=places,panoramio", ],
               function() {

                  $(window).on(MaperialEvents.READY, function() {
                     $("#waitingSpin").css("display", "none")
                  })

                  var maperial = new Maperial({name:"maperial"})
                  var config = maperial.emptyConfig();

                  config.hud.elements[HUD.LATLON]  	= {show : true,  	type : HUD.PANEL,   label : "Composition", disableDrag : true };
                  
                  var lensConfig = maperial.emptyConfig();
                  lensConfig.layers.push(LayersManager.getImagesLayerConfig(Source.Images, Source.IMAGES_MAPQUEST))
                  
                  var lens = {
                     type  		: Maperial.LENS,
                     name 		: "Lens",
					 config		: lensConfig,
                     draggable 	: true,
                     //width 		: 250,
                     //height		: 250,
                     //position 	: { 
                     //   left	: "50%", 
                     //   top    	: "50%" 
                     //},
                     //borderRadius : 10,
                  }

                  var minifierConfig = maperial.emptyConfig();
                  minifierConfig.layers.push(LayersManager.getImagesLayerConfig(Source.Images, Source.IMAGES_STAMEN_TONER))
                  
                  var minifier = {
                     type  		: Maperial.MINIFIER,
                     name 		: "Minifier",
					 config		: minifierConfig,
                     draggable 	: true,
                     width 		: 250,
                     height		: 250,
                     position 	: { 
                        right	: "50", 
                        top    	: "50" 
                     },
                     borderRadius : 130,
                  }
                  
                  // default
                  //config.children.push({})
                  
                  config.children.push(lens)
                  config.children.push(minifier)
                  config.layers.push(LayersManager.getImagesLayerConfig(Source.Images, Source.IMAGES_STAMEN_WATERCOLOR))
                  
                  maperial.apply(config)
               });
</script>


</html>

