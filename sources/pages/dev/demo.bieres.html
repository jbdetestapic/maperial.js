<html>

<head>
<title>Demo Maperial- Style Edition</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<link href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css" />
<link href="http://static.maperial.localhost/css/maperial-js.min.css" rel="stylesheet" type="text/css" />
</head>

<body>
	<img id="waitingSpin" src="http://static.maperial.localhost/images/mapediting/spin.gif" />
</body>

<script type="text/javascript" src="/js/tools/script-loader.js"></script>

<script type="text/javascript">
   window.scriptLoader
         .getScripts(
               [ 
                "http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js",
                "http://code.jquery.com/ui/1.10.3/jquery-ui.js" ,
                "/js/libs/jquery.reveal.js",

               // new 
               "/js/extensions/maperialjs/libs/proj4js-compressed.js",
               "/js/extensions/maperialjs/rendering/gl-customrenderer.js",
               "/js/extensions/maperialjs/rendering/gl-heatrenderer.js",
               "/js/extensions/maperialjs/rendering/gl-customlayer.js",
               "/js/extensions/maperialjs/customdata.js",
               "/js/extensions/maperialjs/color.js",
               "/js/extensions/maperialjs/colorbardata.js",
               "/js/extensions/maperialjs/style.js",

                // tools
                "/js/tools/utils.js",
                "/js/libs/jquery.mousewheel.min.js",
                "/js/libs/jquery.selectbox-0.2.min.js",
                "/js/libs/jquery.validate.min.js",
                //"/js/libs/proj4js-compressed.js",

                // libs
                "/js/extensions/maperialjs/libs/gl-matrix-min.js",
                "/js/extensions/maperialjs/libs/coordinate-system.js",
                "/js/extensions/maperialjs/libs/geoloc.js",
                "/js/extensions/maperialjs/libs/colorpicker.js",
                "/js/extensions/maperialjs/libs/RGBColor.js",
                "/js/extensions/maperialjs/libs/hashmap.js",
                "/js/extensions/maperialjs/libs/canvasutilities.js",
                "/js/extensions/maperialjs/libs/canvg.js",
                "/js/extensions/maperialjs/libs/StackBlur.js",

                // rendering
                "/js/extensions/maperialjs/rendering/gl-tools.js",
                "/js/extensions/maperialjs/rendering/gl-rasterlayer.js",
                "/js/extensions/maperialjs/rendering/gl-imagelayer.js",
                "/js/extensions/maperialjs/rendering/gl-shadelayer.js",
                "/js/extensions/maperialjs/rendering/gl-tile.js",
                "/js/extensions/maperialjs/rendering/gl-vectoriallayer.js",
                "/js/extensions/maperialjs/rendering/render-line.js",
                "/js/extensions/maperialjs/rendering/render-text.js",
                "/js/extensions/maperialjs/rendering/tile-renderer.js",
                "/js/extensions/maperialjs/rendering/map-renderer.js",

                // modules
                "/js/extensions/maperialjs/events.js",
                "/js/extensions/maperialjs/source.js",
                "/js/extensions/maperialjs/mouse.js",
                "/js/extensions/maperialjs/mover.js",
                "/js/extensions/maperialjs/template-builder.js",

                // hud
                "/js/extensions/maperialjs/hud/hud.js",
                "/js/extensions/maperialjs/hud/panel-composition.js",
                "/js/extensions/maperialjs/hud/panel-layer-settings.js",
                "/js/extensions/maperialjs/hud/panel-switch.js",
                "/js/extensions/maperialjs/hud/panel-controls.js",
                "/js/extensions/maperialjs/hud/panel-latlon.js",
                "/js/extensions/maperialjs/hud/panel-scale.js",
                "/js/extensions/maperialjs/hud/panel-settings.js",
                "/js/extensions/maperialjs/hud/panel-attribution.js",
                "/js/extensions/maperialjs/hud/triggers.js",

                // managers
                "/js/extensions/maperialjs/managers/config-manager.js",
                "/js/extensions/maperialjs/managers/styles-manager.js",
                "/js/extensions/maperialjs/managers/colorbars-manager.js",
                "/js/extensions/maperialjs/managers/layers-manager.js",
                "/js/extensions/maperialjs/managers/sources-manager.js",
                "/js/extensions/maperialjs/managers/layers-creation.js",

                // styleEditor
                "/js/extensions/maperialjs/styleEditor/style-editor.js",
                "/js/extensions/maperialjs/styleEditor/loader.js",
                "/js/extensions/maperialjs/styleEditor/accordion.js",
                "/js/extensions/maperialjs/styleEditor/widget-manager.js",
                "/js/extensions/maperialjs/styleEditor/zoom-manager.js",
                "/js/extensions/maperialjs/styleEditor/tools.js",
                
                // edition
                "/js/extensions/maperialjs/edition/boundingbox-drawer.js",
                "/js/extensions/maperialjs/edition/colortool.js",
                "/js/extensions/maperialjs/edition/symbolizer.js",

                // colorbar
                "/js/extensions/maperialjs/colorbar/colorbar-rainbow.js",
                "/js/extensions/maperialjs/colorbar/colorbar.js",

                "/js/extensions/maperialjs/mapView.js",
                "/js/extensions/maperialjs/maperial.js",


                  // google - geoloc
                  "https://maps.googleapis.com/maps/api/js?key=AIzaSyATwlkawyHykpfJF24jcPgL_b8kK8zO2Bc&sensor=false&libraries=places,panoramio", ],
            function() {

                  $(window).on(MaperialEvents.READY, function() {
                     $("#waitingSpin").css("display", "none")
                  })

                  //-----------------------------------------------//
                  
                  var maperial = new Maperial()
               	  var mainConfig   = ConfigManager.newConfig();
			      
			      mainConfig.map.defaultZoom    = 9
			      mainConfig.map.latitude       = 50.516584
			      mainConfig.map.longitude      = 3.186998

			      //-----------------------------------------------//
 			      
			      var cstyle        = maperial.createStyle      ()
					var cdata         = maperial.createCustomData ()
					
					//var ps            = new PointSymbolizer("symbols/blue.pointer.jpg") 
					var ps            = new PointSymbolizer("symbols/beer.svg") 
					//var ps            = new PointSymbolizer("symbols/airfield.svg") 
					var pSymbId       = cstyle.AddSymbolizer ( ps , 18 , 0  );
			      
			      // http://thenounproject.com/noun/beer/?dwn=CCBY&dwn_icon=634#icon-No634
			            
					cdata.addPoint ([50.529722,2.931556999999998], pSymbId, "Angelus ") 
					cdata.addPoint ([50.485569,2.8307250000000295], pSymbId, "Abbaye de Lille ") 
					cdata.addPoint ([50.367874,3.080601999999999], pSymbId, "Abbaye de St Landelin ") 
					cdata.addPoint ([44.85579000000001,-0.6157699999999977], pSymbId, "Abbatiale St Amand ") 
					cdata.addPoint ([50.529722,2.931556999999998], pSymbId, "Bière Lepers 8 ") 
					cdata.addPoint ([50.69285499999999,2.4138020000000324], pSymbId, "Bracine ") 
					cdata.addPoint ([50.866145,1.6313259999999445], pSymbId, "Belle dale ") 
					cdata.addPoint ([50.750115,2.252207999999996], pSymbId, "Bière des ruchettes ") 
					cdata.addPoint ([50.367874,3.080601999999999], pSymbId, "Bière du désert ") 
					cdata.addPoint ([50.605934,3.0786829999999554], pSymbId, "Belzébuth ") 
					cdata.addPoint ([44.85579000000001,-0.6157699999999977], pSymbId, "Braderie de Lille ") 
					cdata.addPoint ([44.397248,0.8049350000000004], pSymbId, "Bière Nouvelle ") 
					cdata.addPoint ([50.298389,3.7941940000000614], pSymbId, "Bière de luxe ") 
					cdata.addPoint ([50.529722,2.931556999999998], pSymbId, "Bière des Flandres ") 
					cdata.addPoint ([50.33858499999999,3.7523610000000645], pSymbId, "Cuvée des Jonquilles ") 
					cdata.addPoint ([50.281524,3.3199749999999995], pSymbId, "Choulette ") 
					cdata.addPoint ([50.281524,3.3199749999999995], pSymbId, "D'Artagnan ") 
					cdata.addPoint ([50.724993,3.1620699999999715], pSymbId, "Duc d'Havré ") 
					cdata.addPoint ([50.2279399,3.6767340000000104], pSymbId, "Ecume des jours ") 
					cdata.addPoint ([50.750115,2.252207999999996], pSymbId, "Epi de Facon ") 
					cdata.addPoint ([50.816405,2.5752219999999397], pSymbId, "Fromulus ") 
					cdata.addPoint ([50.367874,3.080601999999999], pSymbId, "Goudale ") 
					cdata.addPoint ([50.605934,3.0786829999999554], pSymbId, "Gold Triumph ") 
					cdata.addPoint ([50.605934,3.0786829999999554], pSymbId, "Grain d'Orge ") 
					cdata.addPoint ([50.529722,2.931556999999998], pSymbId, "Harengus ") 
					cdata.addPoint ([50.42672100000001,2.7106039999999894], pSymbId, "Hildegarde ") 
					cdata.addPoint ([50.26655299999999,3.1663929000000053], pSymbId, "Iris Beer ") 
					cdata.addPoint ([50.312073,3.6277169999999614], pSymbId, "Jenlain ") 
					cdata.addPoint ([50.642989,2.6392740000000003], pSymbId, "Kaou'ët ") 
					cdata.addPoint ([50.485569,2.8307250000000295], pSymbId, "Maltesse ") 
					cdata.addPoint ([50.891315,2.4271360000000186], pSymbId, "Maline ") 
					cdata.addPoint ([50.605934,3.0786829999999554], pSymbId, "Orpal ") 
					cdata.addPoint ([50.42672100000001,2.7106039999999894], pSymbId, "Page24 ") 
					cdata.addPoint ([50.529722,2.931556999999998], pSymbId, "Rijsel ") 
					cdata.addPoint ([50.891315,2.4271360000000186], pSymbId, "Rouge Flamande ") 
					cdata.addPoint ([50.510693,2.785233000000062], pSymbId, "Saint Glinglin Triple ") 
					cdata.addPoint ([50.367874,3.080601999999999], pSymbId, "Saaz ") 
					cdata.addPoint ([50.605934,3.0786829999999554], pSymbId, "Septante 5 ") 
					cdata.addPoint ([45.138896,4.643035000000054], pSymbId, "Mythique ") 
					cdata.addPoint ([-20.963728,55.647265999999945], pSymbId, "St Leu ") 
					cdata.addPoint ([50.281524,3.3199749999999995], pSymbId, "Tour d'Ostrevant ") 
					cdata.addPoint ([50.367874,3.080601999999999], pSymbId, "Tequieros ") 
					cdata.addPoint ([50.103942,3.544234999999958], pSymbId, "Vivat ") 
					cdata.addPoint ([50.510693,2.785233000000062], pSymbId, "Weed ")

					                  
	              //-----------------------------------------------//

	              mainConfig.layers.push(LayersManager.getImagesLayerConfig(Source.Images, Source.IMAGES_STAMEN_WATERCOLOR))
	              mainConfig.layers.push( LayersManager.getCustomLayerConfig( cdata,cstyle ) )  

	              //-----------------------------------------------//

	              var mainOptions = {
			         type       : Maperial.MAIN,
			         name       : "maperialDemo"
			      }
			      
			      var map = {
			         views : [{
			            config  : mainConfig,
			            options : mainOptions,
			         }]
			      }

	              //-----------------------------------------------//
			         
            	  maperial.build([map])
               });
</script>


</html>

