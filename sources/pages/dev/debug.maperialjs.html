<html>

<head>
<title>Demo Maperial- Style Edition</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<link href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css" />
<link href="http://static.maperial.localhost/css/maperial-js.min.css" rel="stylesheet" type="text/css" />
</head>

<body>
	<img id="waitingSpin" src="http://static.maperial.localhost/images/mapediting/spin.gif" />
</body>

<script type="text/javascript" src="/js/tools/script-loader.js"></script>

<script type="text/javascript">
   window.scriptLoader
         .getScripts(
               [
                //"http://sources.maperial.localhost/pages/dev/misc/jquery.min.js",
                //"http://sources.maperial.localhost/pages/dev/misc/jquery-ui.js",
                //"http://sources.maperial.localhost/pages/dev/misc/leaflet.js",
                "http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js",
                "http://code.jquery.com/ui/1.10.3/jquery-ui.js" ,

                "/js/libs/jquery.reveal.js",

               // new 
               "/js/extensions/maperialjs/libs/proj4js-compressed.js",
               "/js/extensions/maperialjs/libs/defs/EPSG900913.js",
               "/js/extensions/maperialjs/rendering/gl-customrenderer.js",
               "/js/extensions/maperialjs/rendering/gl-heatrenderer.js",
               "/js/extensions/maperialjs/rendering/gl-customlayer.js",
               "/js/extensions/maperialjs/customdata.js",
               "/js/extensions/maperialjs/color.js",
               "/js/extensions/maperialjs/colorbardata.js",
               "/js/extensions/maperialjs/style.js",

                // tools
                "/js/tools/utils.js",
                "/js/libs/jquery.mousewheel.min.js",
                "/js/libs/jquery.selectbox-0.2.min.js",
                "/js/libs/jquery.validate.min.js",
                //"/js/libs/proj4js-compressed.js",

                // libs
                "/js/extensions/maperialjs/libs/gl-matrix-min.js",
                "/js/extensions/maperialjs/libs/coordinate-system.js",
                "/js/extensions/maperialjs/libs/geoloc.js",
                "/js/extensions/maperialjs/libs/colorpicker.js",
                "/js/extensions/maperialjs/libs/RGBColor.js",
                "/js/extensions/maperialjs/libs/hashmap.js",
                "/js/extensions/maperialjs/libs/canvasutilities.js",
                "/js/extensions/maperialjs/libs/canvg.js",
                "/js/extensions/maperialjs/libs/StackBlur.js",
                "/js/extensions/maperialjs/libs/heatmap.js",
                "/js/extensions/maperialjs/libs/heatmap-leaflet.js",
                "/js/extensions/maperialjs/libs/QuadTree.js",

                // rendering
                "/js/extensions/maperialjs/rendering/gl-tools.js",
                "/js/extensions/maperialjs/rendering/gl-rasterlayer.js",
                "/js/extensions/maperialjs/rendering/gl-imagelayer.js",
                "/js/extensions/maperialjs/rendering/gl-shadelayer.js",
                "/js/extensions/maperialjs/rendering/gl-tile.js",
                "/js/extensions/maperialjs/rendering/gl-vectoriallayer.js",
                "/js/extensions/maperialjs/rendering/render-line.js",
                "/js/extensions/maperialjs/rendering/render-text.js",
                "/js/extensions/maperialjs/rendering/tile-renderer.js",
                "/js/extensions/maperialjs/rendering/map-renderer.js",

                // modules
                "/js/extensions/maperialjs/events.js",
                "/js/extensions/maperialjs/source.js",
                "/js/extensions/maperialjs/mouse.js",
                "/js/extensions/maperialjs/mover.js",
                "/js/extensions/maperialjs/template-builder.js",

                // hud
                "/js/extensions/maperialjs/hud/hud.js",
                "/js/extensions/maperialjs/hud/panel-composition.js",
                "/js/extensions/maperialjs/hud/panel-layer-settings.js",
                "/js/extensions/maperialjs/hud/panel-switch.js",
                "/js/extensions/maperialjs/hud/panel-controls.js",
                "/js/extensions/maperialjs/hud/panel-latlon.js",
                "/js/extensions/maperialjs/hud/panel-scale.js",
                "/js/extensions/maperialjs/hud/panel-settings.js",
                "/js/extensions/maperialjs/hud/panel-attribution.js",
                "/js/extensions/maperialjs/hud/triggers.js",

                // managers
                "/js/extensions/maperialjs/managers/config-manager.js",
                "/js/extensions/maperialjs/managers/styles-manager.js",
                "/js/extensions/maperialjs/managers/colorbars-manager.js",
                "/js/extensions/maperialjs/managers/layers-manager.js",
                "/js/extensions/maperialjs/managers/sources-manager.js",
                "/js/extensions/maperialjs/managers/layers-creation.js",

                // styleEditor
                "/js/extensions/maperialjs/styleEditor/style-editor.js",
                "/js/extensions/maperialjs/styleEditor/loader.js",
                "/js/extensions/maperialjs/styleEditor/accordion.js",
                "/js/extensions/maperialjs/styleEditor/widget-manager.js",
                "/js/extensions/maperialjs/styleEditor/zoom-manager.js",
                "/js/extensions/maperialjs/styleEditor/tools.js",
                
                // edition
                "/js/extensions/maperialjs/edition/boundingbox-drawer.js",
                "/js/extensions/maperialjs/edition/colortool.js",
                "/js/extensions/maperialjs/edition/symbolizer.js",

                // colorbar
                "/js/extensions/maperialjs/colorbar/colorbar-rainbow.js",
                "/js/extensions/maperialjs/colorbar/colorbar.js",

                "/js/extensions/maperialjs/mapView.js",
                "/js/extensions/maperialjs/maperial.js",


                  // google - geoloc
                  "https://maps.googleapis.com/maps/api/js?key=AIzaSyATwlkawyHykpfJF24jcPgL_b8kK8zO2Bc&sensor=false&libraries=places,panoramio", ],
            function() {

               $(window).on(MaperialEvents.READY, function() {
                  $("#waitingSpin").css("display", "none")
               })

               var maperial      = new Maperial()
               var mainConfig    = ConfigManager.newConfig();
               var cdata         = maperial.createCustomData ()
               var cbm           = new ColorbarsManager ( null );
               var cb            = new ColorBarData()
               
               cb.BeginWithAlphaZero ( true )
               cb.Set(0.0  ,new GradiantColor(0.0,0.0,1.0,0.0))
               cb.Set(0.10 ,new GradiantColor(0.0,0.0,1.0,1.0))
               cb.Set(0.15 ,new GradiantColor(0.0,1.0,1.0,1.0))
               cb.Set(0.45 ,new GradiantColor(0.0,1.0,0.0,1.0))
               cb.Set(0.75 ,new GradiantColor(1.0,1.0,0.0,1.0))
               cb.Set(1.0  ,new GradiantColor(1.0,0.0,0.0,1.0))
               cbm.SetColorBar(cb)
               
               cdata.addPoint    ( [44.926327,3.104466], null , { diameter : 150 , scale : 0.6 } )
               cdata.addPoint    ( [44.897957,3.138466], null , { diameter : 250 , scale : 0.2 } )
               cdata.addPoint    ( [44.926327,3.138466], null /*, { diameter : 250 , scale : 0.35 }*/ )
               
               mainConfig.map.defaultZoom    = 8
               mainConfig.map.latitude       = 46.316584
               mainConfig.map.longitude      = 6.486998

               //mainConfig.map.defaultZoom    = 18;
               //mainConfig.map.latitude       = 44.926327;
               //mainConfig.map.longitude      = 3.104466;
               
               //mainConfig.map.defaultZoom    = 6;
               //mainConfig.map.latitude       = 34.885931;
               //mainConfig.map.longitude      = 98.653793;
               
               mainConfig.hud.elements[HUD.CONTROLS]  	= {show : true,  	type : HUD.PANEL,   label : "Composition", disableDrag : true };
               mainConfig.hud.elements[HUD.COMPOSITIONS]  	= {show : true,  	type : HUD.PANEL,   label : "Composition", disableDrag : true };
               //mainConfig.hud.elements[HUD.LAYER_SETTINGS]	= {show : true, 	type : HUD.PANEL, 	label : "Layer Settings", disableDrag : true };
               
               //mainConfig.layers.push(LayersManager.getOSMLayerConfig([Maperial.DEFAULT_STYLE_UID]))
               //mainConfig.layers.push(LayersManager.getImagesLayerConfig(Source.Images, Source.IMAGES_OCM_TRANSPORT))
                  
               //mainConfig.layers.push(LayersManager.getShadeLayerConfig())
               //mainConfig.layers.push(LayersManager.getSrtmLayerConfig())
                  
               //mainConfig.layers.push(LayersManager.getImagesLayerConfig(Source.Images, Source.IMAGES_OCM_TRANSPORT))
               mainConfig.layers.push(LayersManager.getImagesLayerConfig(Source.Images, Source.IMAGES_STAMEN_WATERCOLOR))
               //config.layers.push(LayersManager.getImagesLayerConfig(Source.Images, Source.IMAGES_STAMEN_WATERCOLOR))
               mainConfig.layers.push(LayersManager.getImagesLayerConfig(Source.Images, Source.IMAGES_OCM_CYCLE))
               
               var conf = LayersManager.getHeatLayerConfig( cdata, cb.Uid() )
               conf.params.diameter = 300;
               conf.params.scale    = 0.8;
               mainConfig.layers.push( conf )
                  
               var mainOptions = {
                  type       : Maperial.MAIN,
                  name       : "maperialDemo"
               }
               
               var map = {
                  views : [{
                     config  : mainConfig,
                     options : mainOptions,
                  }]
               }
                  
               maperial.build([map])
            });
</script>


</html>

